/* 
 * https://cphayim.me 
 * crater(isRandom, color, opacity)
 * Create a full-screen Crater canvas animation
 * 创建一个全屏的 Crater canvas 动画
 * @param {Boolean} isRandom 
 *        Pass a Boolean to confirm whether to use random colors
 *        传递一个布尔值以确认是否使用随机颜色
 * @param {String} color 
 *        Specify a color through a hex color, valid on the premise that isRandom is false, default: #f00
 *        通过十六进制颜色指定颜色，前提是 isRandom 为 false
 * @param {Number} opacity default: 0.5 
*/
!function(a){var b=function(b,c,d){"use strict";function e(a){var b=[],c=[];if(a=a.replace(/#/,""),3==a.length){for(var e=[],f=0;f<3;f++)e.push(a.charAt(f)+a.charAt(f));a=e.join("")}for(var f=0;f<3;f++)b[f]="0x"+a.substr(f+2,2),c.push(parseInt(Number(b[f])));return"rgba("+c.join(",")+","+d+")"}function f(a,b){function c(c){return f(a+c.x/2,b+c.y/2)}return{x:a,y:b,add:c}}function g(a,b,c,d,e){return{position:a,velocity:b,color:c,lifespan:d,onDeath:e}}function h(){return Math.random()-.5}function i(a){for(var b=[],c=0;c<o;c++)b.push(g(a.position,f(a.velocity.x+h(),a.velocity.y*h()),n,parseInt(1e4*Math.random()+100)));return b}function j(){function b(){k=[];for(var a=0;a<h.width;a+=l){var b=a/(2*Math.PI),c=Math.cos(b)*h.height/4,d=Math.sin(b)*h.height/4;k.push(g(f(c+h.width/2,d+h.height/2),f(0,0),m,1e5*Math.random(),i))}}function c(a){var b=a.velocity.x+(Math.random()-.5)*l,c=a.velocity.y+(Math.random()-.5)*l;return g(a.position,f(b,c),a.lifespan,a.onDeath)}function d(){for(var a=k,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;j.fillStyle=e.color,j.fillRect(e.position.x,e.position.y,l,l)}}function e(){for(var a=[],b=k,d=Array.isArray(b),e=0,b=d?b:b[Symbol.iterator]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{if(e=b.next(),e.done)break;f=e.value}var h=f,i=c(h),j=g(h.position.add(i.velocity),i.velocity,h.color,h.lifespan-1,h.onDeath);j.lifespan>0?a.push(j):j.onDeath&&(a=a.concat(j.onDeath(j)))}k=a}var h=document.createElement("canvas"),j=h.getContext("2d"),k=[];document.body.appendChild(h),h.width=a.innerWidth,h.height=a.innerHeight,h.addEventListener("click",b);p(0)(h.width),p(0)(h.height);return j.fillStyle="rgba(34,34,34,1)",j.fillRect(0,0,h.width,h.height),b(),{update:e,draw:d}}function k(){requestAnimationFrame(k),q.update(),q.draw()}var l=.5,m="rgba(255,0,0,0.5)",n="rgba(255,255,255,0.3)",o=20;d=d||.5,b?m="rgba("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(155*Math.random()+100)+","+d+")":c&&(m=e(c,d)),console.log(m);var p=function(a){return function(b){return function(c){return Math.max(a,Math.min(b,c))}}},q=j();k()};a.crater=b}(window);